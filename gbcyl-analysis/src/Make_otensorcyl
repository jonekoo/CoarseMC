F90=gfortran
OBJS=otensorcyl.o io.o particle.o nrtype.o utils.o order.o division.o
MODS=io.mod particle.mod nrtype.mod utils.mod order.mod division.mod
FLGS=-O3

%.o : %.f90
	$(F90) $(FLGS) -c $<
%.mod : %.f90
	$(F90) $(FLGS) -c $<

otensorcyl : $(OBJS) $(MODS)
	$(F90) $(FLGS) -o otensorcyl $(OBJS)

division.o division.mod : division.f90 nrtype.mod particle.mod
order.o order.mod : order.f90 nrtype.mod particle.mod
utils.o utils.mod : utils.f90 nrtype.mod
nrtype.o nrtype.mod : nrtype.f90
particle.o particle.mod : particle.f90 nrtype.mod utils.mod
io.o io.mod : io.f90 particle.mod
otensorcyl.o : otensorcyl.f90 io.mod particle.mod nrtype.mod order.mod division.mod

clean : 
	rm $(OBJS) $(MODS)