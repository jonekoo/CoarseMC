OBJS=nrtype.o nrutil.o nr.o rf_s.o rf_v.o rd_s.o rd_v.o horner.o attwall.o repwall.o utils.o particle.o cylinder.o particlewall.o gbgb.o verlet.o energy.o mt19937.o mcstep.o particledata.o io.o main.o

MODS=nrtype.mod nrutil.mod nr.mod utils.mod particle.mod cylinder.mod particlewall.mod gbgb.mod verlet.mod energy.mod mt19937.mod mcstep.mod particledata.mod io.mod

FLGS=-fast -Mipa=fast,inline -V6.0 -Mprof=time
F90=pgf95

%.o : %.f90
	$(F90) -c $(FLGS) $< 
%.mod : %.f90
	$(F90) -c $(FLGS) $<

gbcyl : $(OBJS) $(MODS)
	$(F90) $(OBJS) $(FLGS) -Bstatic -o gbcyl


utils.o utils.mod : utils.f90 nrtype.mod
io.o io.mod : io.f90 nrtype.mod particle.mod
particledata.o particledata.mod : particledata.f90 nrtype.mod particle.mod cylinder.mod  
mcstep.o mcstep.mod : mcstep.f90 nrtype.mod energy.mod cylinder.mod particle.mod mt19937.mod verlet.mod
mt19937.o mt19937.mod : mt19937.f90 
energy.o energy.mod : energy.f90 nrtype.mod verlet.mod particlewall.mod cylinder.mod particle.mod
verlet.o verlet.mod : verlet.f90 nrtype.mod particle.mod cylinder.mod
gbgb.o gbgb.mod : gbgb.f90 nrtype.mod cylinder.mod
particlewall.o particlewall.mod : particlewall.f90 nrtype.mod  cylinder.mod particle.mod nr.mod
cylinder.o cylinder.mod : cylinder.f90 nrtype.mod
particle.o particle.mod : particle.f90 utils.mod nrtype.mod cylinder.mod gbgb.mod mt19937.mod
rf_s.o : rf_s.f90 nrtype.mod nrutil.mod
rf_v.o : rf_v.f90 nrtype.mod nrutil.mod
rd_s.o : rd_s.f90 nrtype.mod nrutil.mod
rd_v.o : rd_v.f90 nrtype.mod nrutil.mod
repwall.o : repwall.f90 nr.mod nrtype.mod
attwall.o : attwall.f90 nr.mod nrtype.mod
nr.o nr.mod : nr.f90 nrtype.mod 
nrutil.o nrutil.mod : nrutil.f90 nrtype.mod
nrtype.o nrtype.mod : nrtype.f90 
main.o : main.f90 nrtype.mod mcstep.mod energy.mod cylinder.mod verlet.mod particlewall.mod gbgb.mod particle.mod io.mod mt19937.mod

clean : 
	rm *.o *.mod
